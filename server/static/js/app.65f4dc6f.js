(function(t){function e(e){for(var r,o,s=e[0],c=e[1],u=e[2],d=0,l=[];d<s.length;d++)o=s[d],a[o]&&l.push(a[o][0]),a[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);p&&p(e);while(l.length)l.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],r=!0,s=1;s<n.length;s++){var c=n[s];0!==a[c]&&(r=!1)}r&&(i.splice(e--,1),t=o(o.s=n[0]))}return t}var r={},a={1:0},i=[];function o(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var p=c;i.push([11,0]),n()})({"/dEb":function(t,e,n){},"09i/":function(t,e,n){"use strict";var r=n("Tjbr"),a=n.n(r);a.a},11:function(t,e,n){t.exports=n("zUnb")},1918:function(t,e,n){"use strict";var r=n("K3YX"),a=n.n(r);a.a},BRYY:function(t,e,n){"use strict";var r=n("i8um"),a=n.n(r);a.a},C6tg:function(t,e,n){},K3YX:function(t,e,n){},Nz0v:function(t,e,n){},Nz30:function(t,e,n){},REdC:function(t,e,n){"use strict";var r=n("WYGl"),a=n.n(r);a.a},Tjbr:function(t,e,n){},V1Ag:function(t,e,n){"use strict";var r=n("/dEb"),a=n.n(r);a.a},WYGl:function(t,e,n){},"Xv+J":function(t,e,n){"use strict";var r=n("Nz30"),a=n.n(r);a.a},"a+7f":function(t,e,n){"use strict";var r=n("hRRV"),a=n.n(r);a.a},hRRV:function(t,e,n){},i8um:function(t,e,n){},mxmt:function(t,e,n){t.exports=n.p+"img/logo.09eb6e96.svg"},nNx0:function(t,e,n){"use strict";var r=n("uWEC"),a=n.n(r);a.a},oIJT:function(t,e,n){"use strict";var r=n("C6tg"),a=n.n(r);a.a},uWEC:function(t,e,n){},"xG+s":function(t,e,n){"use strict";var r=n("Nz0v"),a=n.n(r);a.a},zUnb:function(t,e,n){"use strict";n.r(e);n("VRzm");var r=n("Kw5r"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view"),n("dialogs-wrapper",{attrs:{"wrapper-name":"default"}})],1)},i=[],o=(n("nNx0"),n("KHd+")),s={},c=Object(o["a"])(s,a,i,!1,null,null,null),u=c.exports,p=n("jE9Z"),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("page-layout",{attrs:{title:"Editace zpěvníku"}},[n("template",{slot:"header-button"},[t.isNew?t._e():n("router-link",{staticClass:"btn btn-primary",attrs:{to:{name:"songbookAddSongs",params:{songbookId:t.songbookId}}}},[t._v("Přidat písně")])],1),n("div",{staticClass:"col-sm-12 col-md-6"},[n("form",[n("div",{staticClass:"form-group"},[n("label",[t._v("Jméno zpěvníku:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.songbookTitle,expression:"songbookTitle"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.songbookTitle},on:{input:function(e){e.target.composing||(t.songbookTitle=e.target.value)}}})])])]),t.isReady?n("div",{staticClass:"col-sm-12 col-md-6 save-wrapper"},[n("button",{class:"btn btn-"+(t.isChanged?"primary":"default"),attrs:{disabled:!t.isChanged},on:{click:function(e){t.save()}}},[t._v("Uložit")])]):t._e(),t.isReady?n("div",{staticClass:"col-sm-12 export-wrapper"},[t.exportLoading?n("span",{staticClass:"alert alert-primary"},[t._v("Zpěvník se připravuje...")]):t._e(),t.exportFailed?n("span",{staticClass:"alert alert-danger"},[t._v("Zpěvník se nepodařilo zkompilovat.")]):t._e(),t.exportReady?n("span",{staticClass:"alert alert-success"},[t._v("\n\t\t\tZpěvník je připraven! Stáhnout ho můžeš\n\t\t\t"),n("a",{attrs:{target:"_blank",rel:"noopener noreferrer",href:t.exportLink}},[t._v(" zde")])]):t._e(),n("button",{staticClass:"btn btn-primary button-ml",class:t.isChanged?"disabled":"",attrs:{disabled:t.isChanged},on:{click:function(e){t.exportSongbook()}}},[t._v("\n\t\t\tExportovat do pdf\n\t\t")])]):t._e(),n("div",{staticClass:"col-sm-12"},[n("table",{staticClass:"table table-striped"},[n("thead",[n("tr",[n("th",[t._v("#")]),n("th",[t._v("Píseň")]),n("th",[t._v("Interpret")]),n("th",[t._v("Akce")])])]),t.isLoading?n("tbody",[n("tr",[n("td",{attrs:{colSpan:"{5}"}},[n("icon",{attrs:{name:"spinner",pulse:""}})],1)])]):t._e(),n("draggable",{attrs:{element:"tbody",options:{group:"people"}},on:{update:function(e){t.setSortChanged()},start:function(e){t.drag=!0},end:function(e){t.drag=!1}},model:{value:t.songs,callback:function(e){t.songs=e},expression:"songs"}},t._l(t.songs,function(e,r){return t.isReady?n("tr",{key:e.variant_id,staticClass:"list-item"},[n("td",[t._v(t._s(r+1))]),n("td",[t._v(t._s(e.song.title))]),n("td",[t._v(t._s(t.mapInterpretersNames(e.song.interpreters)))]),n("td",[n("router-link",{staticClass:"button-mr",attrs:{to:{name:"variantView",params:{songId:e.song.song_id,variantId:e.variant_id}}}},[t._v("Zobrazit")]),n("router-link",{staticClass:"button-mr",attrs:{to:{name:"variantEdit",params:{songId:e.song.song_id,variantId:e.variant_id}}}},[t._v("Upravit")]),n("a",{staticClass:"delete-button",on:{click:function(n){t.removeVariant(e.variant_id)}}},[t._v("Odebrat")])],1)]):t._e()}))],1)])],2)},l=[],v=(n("Vd3H"),n("yT7P")),g=(n("ls82"),n("MECJ")),h=(n("f3/d"),n("xmWZ")),f=n("3Aqn"),m=n("qpph"),b=n("0yhX"),y=n("EdlT"),k=n("mrSG"),_=n("YKMj"),w=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container-fluid"},[r("nav",{staticClass:"navbar navbar-expand-lg navbar-light bg-light d-flex justify-content-center"},[r("div",{staticClass:"container"},[r("router-link",{attrs:{to:{name:"songList"}}},[r("img",{staticClass:"logo",attrs:{src:n("mxmt"),alt:""}})]),t._m(0),r("div",{staticClass:"collapse navbar-collapse d-flex",attrs:{id:"navbarNav"}},[r("ul",{staticClass:"navbar-nav mr-auto"},[r("li",{staticClass:"nav-item active"},[r("router-link",{staticClass:"nav-link",attrs:{to:{name:"songList"}}},[t._v("Písně")])],1),r("li",{staticClass:"nav-item"},[r("router-link",{staticClass:"nav-link",attrs:{to:{name:"songbookList"}}},[t._v("Zpěvníky")])],1)]),r("ul",{staticClass:"navbar-nav"},[r("li",{staticClass:"nav-item active"},[r("a",{staticClass:"nav-link"},[t._v(t._s(t.username))])]),r("li",{staticClass:"nav-item"},[r("a",{staticClass:"nav-link",attrs:{href:t.userLogoutLink}},[t._v("Odhlásit")])])])])],1)]),r("div",{staticClass:"row"},[r("div",{staticClass:"container"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-12"},[r("div",{staticClass:"song-list-header"},[r("h4",[t._v(t._s(t.title))]),t._t("header-button")],2),r("hr")])]),r("div",{staticClass:"row"},[t._t("default")],2)])])])},S=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"}},[n("span",{staticClass:"navbar-toggler-icon"})])}],j=n("S7WH"),x=Object(j["a"])("user"),O=function(t){function e(){return Object(h["a"])(this,e),Object(b["a"])(this,Object(y["a"])(e).apply(this,arguments))}return Object(m["a"])(e,[{key:"created",value:function(){this.getCurrentUser()}},{key:"username",get:function(){var t=this.$store.state.user;return t&&t.currentUser?t.currentUser.name:""}},{key:"userLogoutLink",get:function(){var t=this.$store.state.user;return t&&t.currentUser?t.currentUser.logout_link:""}}]),Object(f["a"])(e,t),e}(_["c"]);k["a"]([Object(_["b"])(),k["b"]("design:type",String)],O.prototype,"title",void 0),k["a"]([x.Action,k["b"]("design:type",Function)],O.prototype,"getCurrentUser",void 0),O=k["a"]([_["a"]],O);var C,I=O,R=I,P=(n("1918"),Object(o["a"])(R,w,S,!1,null,"c1e465ca",null)),E=P.exports;(function(t){t[t["loading"]=0]="loading",t[t["failed"]=1]="failed",t[t["ready"]=2]="ready"})(C||(C={}));var A,N,V,T,F=n("FRYs"),$=n.n(F),L=Object(j["a"])("songbook"),B=Object(j["a"])("interpreter"),z=function(t){function e(){var t;return Object(h["a"])(this,e),t=Object(b["a"])(this,Object(y["a"])(e).apply(this,arguments)),t.songbookTitle="",t.songs=[],t.songbookId="",t.isNew=!1,t.drag=!1,t.sortChanged=!1,t}return Object(m["a"])(e,[{key:"setSortChanged",value:function(){this.sortChanged=!0}},{key:"mapInterpretersNames",value:function(t){var e=this;if(t)return t.map(function(t){return e.interpreterById(t).name}).filter(function(t){return t}).join(", ")}},{key:"removeVariant",value:function(t){this.songs=this.songs.filter(function(e){return e.variant_id!==t})}},{key:"save",value:function(){var t=Object(g["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.isNew){t.next=6;break}return t.next=3,this.create(this.songbookTitle);case 3:this.$router.push({name:"songbookEdit",params:{songbookId:this.songbook.id}}),t.next=7;break;case 6:this.update({id:this.songbookId,title:this.songbookTitle,songs:this.songs.map(function(t,e){return Object(v["a"])({},t,{order:e})}),options:this.songbook.options});case 7:this.sortChanged=!1;case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"created",value:function(){var t=Object(g["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.$route.params.songbookId||(this.isNew=!0),this.isNew){t.next=7;break}return this.fetchInterpreters(),this.songbookId=this.$route.params.songbookId,t.next=6,this.fetch(this.songbookId);case 6:this.formInit();case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"formInit",value:function(){this.isNew?(this.songbookTitle="",this.songs=[],this.songbookId=""):(this.songbookTitle=this.songbook.title,this.songs=this.songbook.songs.sort(function(t,e){return t.order-e.order}),this.songbookId=this.songbook.id)}},{key:"onRouteChange",value:function(t,e){t.params.songbookId?(this.fetch(t.params.songbookId),this.isNew=!1):this.isNew=!0,this.formInit()}},{key:"isChanged",get:function(){return this.isNew||this.songbookTitle!==this.songbook.title||this.songs.length!==this.songbook.songs.length||this.sortChanged}},{key:"isReady",get:function(){return this.state===C.ready&&this.interpretersState===C.ready}},{key:"isLoading",get:function(){return this.state===C.loading||this.interpretersState===C.loading}},{key:"exportLoading",get:function(){return this.exportState===C.loading}},{key:"exportReady",get:function(){return this.exportState===C.ready}},{key:"exportFailed",get:function(){return this.exportState===C.failed}}]),Object(f["a"])(e,t),e}(_["c"]);k["a"]([L.Action,k["b"]("design:type",Function)],z.prototype,"fetch",void 0),k["a"]([L.Action,k["b"]("design:type",Function)],z.prototype,"update",void 0),k["a"]([L.Action,k["b"]("design:type",Function)],z.prototype,"create",void 0),k["a"]([L.Action,k["b"]("design:type",Function)],z.prototype,"exportSongbook",void 0),k["a"]([L.State,k["b"]("design:type","function"===typeof(A="undefined"!==typeof C&&C)&&A||Object)],z.prototype,"state",void 0),k["a"]([L.State,k["b"]("design:type","function"===typeof(N="undefined"!==typeof C&&C)&&N||Object)],z.prototype,"exportState",void 0),k["a"]([L.State,k["b"]("design:type","function"===typeof(V="undefined"!==typeof ISongbook&&ISongbook)&&V||Object)],z.prototype,"songbook",void 0),k["a"]([B.State("state"),k["b"]("design:type","function"===typeof(T="undefined"!==typeof C&&C)&&T||Object)],z.prototype,"interpretersState",void 0),k["a"]([B.Action("fetch"),k["b"]("design:type",Function)],z.prototype,"fetchInterpreters",void 0),k["a"]([B.Getter("itemById"),k["b"]("design:type",Function)],z.prototype,"interpreterById",void 0),k["a"]([Object(_["d"])("$route"),k["b"]("design:type",Function),k["b"]("design:paramtypes",[Object,Object]),k["b"]("design:returntype",void 0)],z.prototype,"onRouteChange",null),z=k["a"]([Object(_["a"])({components:{PageLayout:E,Draggable:$.a}})],z);var U=z,M=U,G=(n("xG+s"),Object(o["a"])(M,d,l,!1,null,"23e20448",null)),D=G.exports,Z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("page-layout",{attrs:{title:"Zpěvníky"}},[n("template",{slot:"header-button"},[n("router-link",{staticClass:"btn btn-primary",attrs:{to:{name:"songbookCreate"}}},[t._v("Vytvořit nový zpěvník")])],1),n("div",{staticClass:"col-sm-12"},[n("search-bar",{attrs:{onSearch:t.search,placeholder:"Hledej zpěvník"}}),n("table",{staticClass:"table table-striped"},[n("thead",[n("tr",[n("th",[t._v("#")]),n("th",[t._v("Zpěvník")])])]),n("tbody",[t.isLoading?n("tr",[n("td",{attrs:{colSpan:"{5}"}},[n("icon",{attrs:{name:"spinner",pulse:""}})],1)]):t._e(),t._l(t.items,function(e,r){return t.isReady?n("router-link",{key:e.id,staticClass:"list-item clickable",attrs:{tag:"tr",to:{name:"songbookEdit",params:{songbookId:e.id}}}},[n("td",[t._v(t._s(r+1+t.page*t.perPage))]),n("td",[t._v(t._s(e.title))])]):t._e()})],2)]),t.lastPage>0?n("pagination",{attrs:{activePage:t.page,lastPage:t.lastPage,goToPage:t.goToPage}}):t._e()],1)],2)},J=[],q=(n("xfY5"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"input-group mb-3"},[n("div",{staticClass:"input-group-append",on:{click:function(e){t.onSearch(t.inputValue)}}},[n("span",{staticClass:"input-group-text"},[n("icon",{attrs:{name:"search"}})],1)]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"}],staticClass:"form-control",attrs:{type:"text",placeholder:t.placeholder},domProps:{value:t.inputValue},on:{keypress:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.onSearch(t.inputValue)},input:function(e){e.target.composing||(t.inputValue=e.target.value)}}})])}),Q=[],Y=function(t){function e(){var t;return Object(h["a"])(this,e),t=Object(b["a"])(this,Object(y["a"])(e).apply(this,arguments)),t.inputValue="",t}return Object(f["a"])(e,t),e}(_["c"]);k["a"]([Object(_["b"])(),k["b"]("design:type",Function)],Y.prototype,"onSearch",void 0),k["a"]([Object(_["b"])(),k["b"]("design:type",String)],Y.prototype,"placeholder",void 0),Y=k["a"]([_["a"]],Y);var K=Y,H=K,X=Object(o["a"])(H,q,Q,!1,null,null,null),W=X.exports,tt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",[n("ul",{staticClass:"pagination"},[n("li",{staticClass:"page-item",class:t.canPrev?"":"disabled",on:{click:function(e){t.goToPage(t.activePage-1)}}},[t._m(0)]),t._l(t.pages,function(e){return n("li",{key:e,staticClass:"page-item",class:e-1===t.activePage?"active":"",on:{click:function(n){t.goToPage(e-1)}}},[n("a",{staticClass:"page-link"},[t._v(t._s(e))])])}),n("li",{staticClass:"page-item",class:t.canNext?"":"disabled",on:{click:function(e){t.goToPage(t.activePage+1)}}},[t._m(1)])],2)])},et=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a",{staticClass:"page-link"},[n("span",[t._v("«")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a",{staticClass:"page-link"},[n("span",[t._v("»")])])}],nt=function(t){function e(){return Object(h["a"])(this,e),Object(b["a"])(this,Object(y["a"])(e).apply(this,arguments))}return Object(m["a"])(e,[{key:"pages",get:function(){for(var t=[],e=Math.min(5,this.lastPage),n=Math.min(Math.max(this.activePage+1-Math.floor(e/2),1),this.lastPage+1-e+1),r=n;r<n+e;r++)t.push(r);return t}},{key:"canNext",get:function(){return this.activePage<this.lastPage}},{key:"canPrev",get:function(){return this.activePage>0}}]),Object(f["a"])(e,t),e}(_["c"]);k["a"]([Object(_["b"])(),k["b"]("design:type",Number)],nt.prototype,"activePage",void 0),k["a"]([Object(_["b"])(),k["b"]("design:type",Function)],nt.prototype,"goToPage",void 0),k["a"]([Object(_["b"])(),k["b"]("design:type",Number)],nt.prototype,"lastPage",void 0),nt=k["a"]([_["a"]],nt);var rt,at=nt,it=at,ot=(n("a+7f"),Object(o["a"])(it,tt,et,!1,null,"77f24f7c",null)),st=ot.exports,ct=Object(j["a"])("songbookList"),ut=function(t){function e(){return Object(h["a"])(this,e),Object(b["a"])(this,Object(y["a"])(e).apply(this,arguments))}return Object(m["a"])(e,[{key:"created",value:function(){var t=Object(g["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.fetch();case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"isReady",get:function(){return this.state===C.ready}},{key:"isLoading",get:function(){return this.state===C.loading}}]),Object(f["a"])(e,t),e}(_["c"]);k["a"]([ct.Action,k["b"]("design:type",Function)],ut.prototype,"search",void 0),k["a"]([ct.Action,k["b"]("design:type",Function)],ut.prototype,"fetch",void 0),k["a"]([ct.Action,k["b"]("design:type",Function)],ut.prototype,"goToPage",void 0),k["a"]([ct.State,k["b"]("design:type","function"===typeof(rt="undefined"!==typeof C&&C)&&rt||Object)],ut.prototype,"state",void 0),k["a"]([ct.State,k["b"]("design:type",Array)],ut.prototype,"items",void 0),k["a"]([ct.State,k["b"]("design:type",Number)],ut.prototype,"page",void 0),k["a"]([ct.Getter,k["b"]("design:type",Number)],ut.prototype,"lastPage",void 0),k["a"]([ct.State,k["b"]("design:type",Number)],ut.prototype,"perPage",void 0),ut=k["a"]([Object(_["a"])({components:{PageLayout:E,SearchBar:W,Pagination:st}})],ut);var pt=ut,dt=pt,lt=(n("V1Ag"),Object(o["a"])(dt,Z,J,!1,null,"06c9d180",null)),vt=lt.exports,gt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("page-layout",{attrs:{title:t.songbookEditMode?"Přidávání písní do zpěvníku":"Písničky"}},[n("template",{slot:"header-button"},[t.songbookEditMode?n("button",{staticClass:"btn btn-primary",on:{click:function(e){t.save()}}},[t._v("Uložit")]):n("router-link",{staticClass:"btn btn-primary",attrs:{to:{name:"variantCreate"}}},[t._v("Přidat novou píseň")])],1),n("div",{staticClass:"col-sm-12"},[n("search-bar",{attrs:{onSearch:t.search,placeholder:"Hledej píseň"}}),n("table",{staticClass:"table table-striped"},[n("thead",[n("tr",[n("th",[t._v("#")]),n("th",[t._v("Píseň")]),n("th",[t._v("Interpret")]),n("th",[t._v("Akce")])])]),n("tbody",[t.isLoading?n("tr",[n("td",{attrs:{colSpan:"{5}"}},[n("icon",{attrs:{name:"spinner",pulse:""}})],1)]):t._e(),t._l(t.items,function(e,r){return t.isReady&&!t.songbookEditMode?n("router-link",{key:e.id,staticClass:"list-item clickable",attrs:{tag:"tr",to:{name:"variantView",params:{songId:e.id,variantId:e.variants[0].id}}}},[n("td",[t._v(t._s(r+1+t.page*t.perPage))]),n("td",[t._v(t._s(e.title))]),n("td",[t._v(t._s(t.mapInterpretersNames(e.interpreters)))]),n("td",[n("router-link",{attrs:{to:{name:"variantEdit",params:{songId:e.id,variantId:e.variants[0].id}}}},[t._v("Upravit")])],1)]):t._e()}),t._l(t.items,function(e,r){return t.isReady&&t.songbookEditMode?n("tr",{key:e.id,staticClass:"list-item clickable",class:t.isSongSelected(e.id)?"selected":"",on:{click:function(n){t.toggleAddSongToSongbook(e.id)}}},[n("td",[t._v(t._s(r+1+t.page*t.perPage))]),n("td",[t._v(t._s(e.title))]),n("td",[t._v(t._s(t.mapInterpretersNames(e.interpreters)))]),n("td",[n("router-link",{attrs:{to:{name:"variantEdit",params:{songId:e.id,variantId:e.variants[0].id}}}},[t._v("Upravit")])],1)]):t._e()})],2)]),t.lastPage>0?n("pagination",{attrs:{activePage:t.page,lastPage:t.lastPage,goToPage:t.goToPage}}):t._e()],1)],2)},ht=[],ft=(n("dRSK"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"modal-custom"},[n("div",{staticClass:"overlay",on:{click:function(e){t.$close(!1)}}}),n("div",{staticClass:"modal-content content"},[n("div",{staticClass:"modal-header"},[n("h5",{staticClass:"modal-title"},[t._v("Vyber variantu")]),n("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"},on:{click:function(e){t.$close(!1)}}},[n("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),n("div",{staticClass:"modal-body"},t._l(t.variants,function(e,r){return n("div",{key:e.id,staticClass:"variant-wrapper",on:{click:function(n){t.$close(e.id)}}},[t._v(t._s("Varianta "+(r+1)+" - "+e.description))])})),n("div",{staticClass:"modal-footer"},[n("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(e){t.$close(!1)}}},[t._v("Zrušit")])])])])}),mt=[],bt=function(t){function e(){return Object(h["a"])(this,e),Object(b["a"])(this,Object(y["a"])(e).apply(this,arguments))}return Object(f["a"])(e,t),e}(_["c"]);k["a"]([Object(_["b"])(),k["b"]("design:type",Array)],bt.prototype,"variants",void 0),bt=k["a"]([_["a"]],bt);var yt,kt,_t,wt,St=bt,jt=St,xt=(n("REdC"),Object(o["a"])(jt,ft,mt,!1,null,"0fc0e7ae",null)),Ot=xt.exports,Ct=n("mTVC"),It=Object(j["a"])("songList"),Rt=Object(j["a"])("songbook"),Pt=Object(j["a"])("interpreter"),Et=Object(Ct["create"])(Ot,"variants"),At=function(t){function e(){var t;return Object(h["a"])(this,e),t=Object(b["a"])(this,Object(y["a"])(e).apply(this,arguments)),t.songbookEditMode=!1,t.songbookSongs=[],t}return Object(m["a"])(e,[{key:"mapInterpretersNames",value:function(t){var e=this;if(t)return t.map(function(t){return e.interpreterById(t).name}).filter(function(t){return t}).join(", ")}},{key:"created",value:function(){var t=Object(g["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.reset(),this.fetchInterpreters(),this.fetch(),!this.$route.params.songbookId){t.next=8;break}return this.songbookEditMode=!0,t.next=7,this.fetchSongbook(this.$route.params.songbookId);case 7:this.songbookSongs=this.songbook.songs;case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"toggleAddSongToSongbook",value:function(){var t=Object(g["a"])(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.songbookSongs.find(function(t){return t.song.song_id===e})){t.next=4;break}this.songbookSongs=this.songbookSongs.filter(function(t){return t.song.song_id!==e}),t.next=13;break;case 4:if(n=this.songById(e),r=n.variants[0].id,!(n.variants.length>1)){t.next=12;break}return t.next=9,Et(n.variants);case 9:if(r=t.sent,r){t.next=12;break}return t.abrupt("return");case 12:this.songbookSongs.push({order:this.songbookSongs.length,variant_id:r,song:{song_id:n.id}});case 13:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"isSongSelected",value:function(t){return Boolean(this.songbookSongs.find(function(e){return e.song.song_id===t}))}},{key:"save",value:function(){var t=Object(g["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.update(Object(v["a"])({},this.songbook,{songs:this.songbookSongs.map(function(t){return{variant_id:t.variant_id,order:t.order}})}));case 2:this.$router.push({name:"songbookEdit",params:{songbookId:this.songbook.id}});case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"isReady",get:function(){return this.state===C.ready&&this.interpretersState===C.ready}},{key:"isLoading",get:function(){return this.state===C.loading||this.interpretersState===C.loading}}]),Object(f["a"])(e,t),e}(_["c"]);k["a"]([It.Action,k["b"]("design:type",Function)],At.prototype,"search",void 0),k["a"]([It.Action,k["b"]("design:type",Function)],At.prototype,"fetch",void 0),k["a"]([It.Action,k["b"]("design:type",Function)],At.prototype,"goToPage",void 0),k["a"]([It.State,k["b"]("design:type","function"===typeof(yt="undefined"!==typeof C&&C)&&yt||Object)],At.prototype,"state",void 0),k["a"]([It.State,k["b"]("design:type",Array)],At.prototype,"items",void 0),k["a"]([It.State,k["b"]("design:type",Number)],At.prototype,"page",void 0),k["a"]([It.Getter,k["b"]("design:type",Number)],At.prototype,"lastPage",void 0),k["a"]([It.Getter,k["b"]("design:type",Function)],At.prototype,"songById",void 0),k["a"]([It.State,k["b"]("design:type",Number)],At.prototype,"perPage",void 0),k["a"]([It.Mutation,k["b"]("design:type",Function)],At.prototype,"reset",void 0),k["a"]([Pt.State("items"),k["b"]("design:type",Array)],At.prototype,"interpreters",void 0),k["a"]([Pt.State("state"),k["b"]("design:type","function"===typeof(kt="undefined"!==typeof C&&C)&&kt||Object)],At.prototype,"interpretersState",void 0),k["a"]([Pt.Action("fetch"),k["b"]("design:type",Function)],At.prototype,"fetchInterpreters",void 0),k["a"]([Pt.Getter("itemById"),k["b"]("design:type",Function)],At.prototype,"interpreterById",void 0),k["a"]([Rt.Action("fetch"),k["b"]("design:type",Function)],At.prototype,"fetchSongbook",void 0),k["a"]([Rt.Action,k["b"]("design:type",Function)],At.prototype,"update",void 0),k["a"]([Rt.State,k["b"]("design:type","function"===typeof(_t="undefined"!==typeof C&&C)&&_t||Object)],At.prototype,"songbookState",void 0),k["a"]([Rt.State,k["b"]("design:type","function"===typeof(wt="undefined"!==typeof ISongbook&&ISongbook)&&wt||Object)],At.prototype,"songbook",void 0),At=k["a"]([Object(_["a"])({components:{PageLayout:E,SearchBar:W,Pagination:st}})],At);var Nt,Vt,Tt,Ft=At,$t=Ft,Lt=(n("BRYY"),Object(o["a"])($t,gt,ht,!1,null,"3a53ee48",null)),Bt=Lt.exports,zt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("page-layout",{attrs:{title:"Zobrazení písně"}},[t.isLoading?n("div",[n("icon",{attrs:{name:"spinner",pulse:""}})],1):t._e(),t.isReady?n("div",{staticClass:"col-sm-12"},[n("div",[n("div",[n("h4",[t._v(t._s(t.song.title))]),n("h5",[t._v(t._s(t.mapInterpretersNames(t.song.interpreters)))])]),n("div",{staticClass:"variant-wrapper"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.variantId,expression:"variantId"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.variantId=e.target.multiple?n:n[0]}}},t._l(t.song.variants,function(e,r){return n("option",{key:e.id,domProps:{value:e.id}},[t._v("Varianta "+t._s(r+1))])})),n("div",{staticClass:"variant-desc"},[n("strong",[t._v("Popis varianty:")]),t._v(" "+t._s(t.variantById(t.variantId).description)+"\n\t\t\t\t")])])]),n("div",{staticClass:"song-view"},[t._v("\n\t\t\t"+t._s(t.formattedVariantText)+"\n\t\t")]),n("router-link",{staticClass:"btn btn-default button-mr",attrs:{tag:"button",to:{name:"variantEdit",params:{songId:t.song.id,variantId:t.variantId}}}},[t._v("\n\t\t\tUpravit\n\t\t")])],1):t._e()])},Ut=[],Mt=(n("9XZr"),n("rGqo"),n("KKXr"),n("pIFo"),Object(j["a"])("song")),Gt=Object(j["a"])("interpreter"),Dt=function(t){function e(){var t;return Object(h["a"])(this,e),t=Object(b["a"])(this,Object(y["a"])(e).apply(this,arguments)),t.variantId="",t}return Object(m["a"])(e,[{key:"mapInterpretersNames",value:function(t){var e=this;if(t)return t.map(function(t){return e.interpreterById(t).name}).filter(function(t){return t}).join(", ")}},{key:"created",value:function(){this.fetchInterpreters(),this.fetch(this.$route.params.songId),this.variantId=this.$route.params.variantId}},{key:"onRouteChange",value:function(t,e){t.params.songId!==e.params.songId&&this.fetch(this.$route.params.songId),this.variantId=t.params.variantId}},{key:"onVariantChange",value:function(t,e){t&&e&&t!==e&&this.$router.push({name:"variantView",params:{songId:this.song.id,variantId:t}})}},{key:"isReady",get:function(){return this.state===C.ready&&this.interpretersState===C.ready}},{key:"isLoading",get:function(){return this.state===C.loading||this.interpretersState===C.loading}},{key:"formattedVariantText",get:function(){var t=this.variantById(this.variantId).text.replace(/\[verse\]/gi,"").replace(/\[chorus\]/gi,""),e=t.split(/[\n\r]/).map(function(t){return t.trim()}),n=/\[(.+?)\]/,r=[];return e.forEach(function(t){var e=t,a=n.exec(e),i=[];while(null!==a){var o=a[0],s=a[1],c=a.index,u=c-i.reduce(function(t,e){return t+e.length},0);i.push(s.padStart(u+s.length)),e=e.replace(o,""),a=n.exec(e)}i.length>0&&r.push(i.join("")),r.push(e)}),r.join("\n")}}]),Object(f["a"])(e,t),e}(_["c"]);k["a"]([Mt.Action,k["b"]("design:type",Function)],Dt.prototype,"fetch",void 0),k["a"]([Mt.State,k["b"]("design:type","function"===typeof(Nt="undefined"!==typeof C&&C)&&Nt||Object)],Dt.prototype,"state",void 0),k["a"]([Mt.State,k["b"]("design:type","function"===typeof(Vt="undefined"!==typeof ISong&&ISong)&&Vt||Object)],Dt.prototype,"song",void 0),k["a"]([Mt.Getter,k["b"]("design:type",Function)],Dt.prototype,"variantById",void 0),k["a"]([Gt.State("state"),k["b"]("design:type","function"===typeof(Tt="undefined"!==typeof C&&C)&&Tt||Object)],Dt.prototype,"interpretersState",void 0),k["a"]([Gt.Action("fetch"),k["b"]("design:type",Function)],Dt.prototype,"fetchInterpreters",void 0),k["a"]([Gt.Getter("itemById"),k["b"]("design:type",Function)],Dt.prototype,"interpreterById",void 0),k["a"]([Object(_["d"])("$route"),k["b"]("design:type",Function),k["b"]("design:paramtypes",[Object,Object]),k["b"]("design:returntype",void 0)],Dt.prototype,"onRouteChange",null),k["a"]([Object(_["d"])("variantId"),k["b"]("design:type",Function),k["b"]("design:paramtypes",[String,String]),k["b"]("design:returntype",void 0)],Dt.prototype,"onVariantChange",null),Dt=k["a"]([Object(_["a"])({components:{PageLayout:E}})],Dt);var Zt=Dt,Jt=Zt,qt=(n("oIJT"),Object(o["a"])(Jt,zt,Ut,!1,null,"03297da7",null)),Qt=qt.exports,Yt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("page-layout",{attrs:{title:t.isVariantNew?"Nová varianta písně":"Editace písně"}},[n("template",{slot:"header-button"},[t.isNew||t.isLoading||t.isVariantNew?t._e():n("router-link",{staticClass:"btn btn-primary",attrs:{to:{name:"songVariantCreate",params:{songId:t.song.id}}}},[t._v("Vytvořit novou variantu písně")])],1),t.isLoading?n("div",[n("icon",{attrs:{name:"spinner",pulse:""}})],1):t._e(),t.error?n("div",{staticClass:"col-sm-12 error-msg"},[t._v("\n      "+t._s(422===t.error.response.status?"Špatné formátování - píseň musí začínat nějakým tagem (například [chorus] nebo [verse]) a povoluje jen určité znaky":t.error.message)+"\n    ")]):t._e(),t.isLoading?t._e():n("div",{staticClass:"col-sm-12"},[n("div",[n("div",[n("h4",[t._v(t._s(t.isNew?"Nová píseň":t.songTitle))])]),t.isNew?t._e():n("div",{staticClass:"variant-wrapper"},[t.isVariantNew?n("div",[t._v("Nová varianta")]):n("select",{directives:[{name:"model",rawName:"v-model",value:t.variantId,expression:"variantId"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.variantId=e.target.multiple?n:n[0]}}},t._l(t.song.variants,function(e,r){return n("option",{key:e.id,domProps:{value:e.id}},[t._v("Varianta "+t._s(r+1))])})),n("div",{staticClass:"variant-desc"},[n("strong",[t._v("Popis varianty:")]),t._v(" "+t._s(t.description)+"\n\t\t\t\t\t")])])]),n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-8 col-sm-12"},[n("form",[n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-6"},[n("div",{staticClass:"form-group"},[n("label",[t._v("Jméno písně:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.songTitle,expression:"songTitle"}],staticClass:"form-control",attrs:{type:"text",id:"name"},domProps:{value:t.songTitle},on:{input:function(e){e.target.composing||(t.songTitle=e.target.value)}}})])]),n("div",{staticClass:"col-md-6"},[n("div",{staticClass:"form-group"},[n("label",[t._v("Interpret:")]),n("v-select",{attrs:{multiple:"",taggable:"",options:t.mappedInterpreters,closeOnSelect:!1},model:{value:t.selectedInterpreters,callback:function(e){t.selectedInterpreters=e},expression:"selectedInterpreters"}})],1)])]),n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-6"},[n("div",{staticClass:"form-group"},[n("label",[t._v("Autor hudby:")]),n("v-select",{attrs:{multiple:"",taggable:"",options:t.mappedAuthors,closeOnSelect:!1},model:{value:t.selectedMusicAuthors,callback:function(e){t.selectedMusicAuthors=e},expression:"selectedMusicAuthors"}})],1)]),n("div",{staticClass:"col-md-6"},[n("div",{staticClass:"form-group"},[n("label",[t._v("Autor textu:")]),n("v-select",{attrs:{multiple:"",taggable:"",options:t.mappedAuthors,closeOnSelect:!1},model:{value:t.selectedLyricsAuthors,callback:function(e){t.selectedLyricsAuthors=e},expression:"selectedLyricsAuthors"}})],1)])]),n("div",{staticClass:"form-group"},[n("label",[t._v("Popis varianty:")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"form-control",attrs:{rows:"4"},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}})]),n("div",{staticClass:"form-check mb-10"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.isPrivate,expression:"isPrivate"}],staticClass:"form-check-input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.isPrivate)?t._i(t.isPrivate,null)>-1:t.isPrivate},on:{change:function(e){var n=t.isPrivate,r=e.target,a=!!r.checked;if(Array.isArray(n)){var i=null,o=t._i(n,i);r.checked?o<0&&(t.isPrivate=n.concat([i])):o>-1&&(t.isPrivate=n.slice(0,o).concat(n.slice(o+1)))}else t.isPrivate=a}}}),n("label",{staticClass:"form-check-label"},[t._v("Soukromá")])]),n("editor",{model:{value:t.text,callback:function(e){t.text=e},expression:"text"}}),n("button",{staticClass:"btn btn-primary",on:{click:function(e){e.preventDefault(),t.save()}}},[t._v("\n              Uložit\n            ")])],1)]),n("div",{staticClass:"col-md-4 col-sm-12"},[n("variant-edit-description")],1)])])],2)},Kt=[],Ht=(n("yt8O"),function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)}),Xt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"psm"},[n("h4",[t._v("Editor návod")]),n("p",[t._v("Editor využívá značky pro zadávání akordů a částí písniček.")]),n("ul",[n("li",[n("b",[t._v("[C]")]),t._v("/"),n("b",[t._v("[C#]")]),t._v("/"),n("b",[t._v("[Dmi]")]),t._v(" - akordy")]),n("li",[n("b",[t._v("[verse]")]),t._v(" - sloka")]),n("li",[n("b",[t._v("[chorus]")]),t._v(" - refrén")]),n("li",[n("b",[t._v("[rec]")]),t._v(" - mluvené slovo")]),n("li",[n("b",[t._v("[solo]")]),t._v("/"),n("b",[t._v("[intro]")]),t._v("/"),n("b",[t._v("[outro]")]),t._v("/"),n("b",[t._v("[bridge]")]),t._v("/"),n("b",[t._v("[intermezzo]")]),t._v(" - další možné značky - všechny reprezentují nečíslovanou sloku.")]),n("li",[n("b",[t._v("|:")]),t._v(" ... "),n("b",[t._v(":|")]),t._v(" - začátek a konec repetice")])]),n("p",[t._v("Akordy můžeš psát i ty, které nejsou zde v návodu a nebo v editoru samotném. Zpěvník by měl akceptovat všechny existující akordy")]),n("p",[t._v("Značky vždy značí začátek části, konec je automaticky u další značky nebo na konci písně. Jediné omezení na značky je, že část se nemůže měnit uvnitř repetice a repetice nemohou být vnořené.")]),n("p",[t._v("Značka "),n("b",[t._v("[chorus]")]),t._v(" se dá bez problému použít samotná a reprezentuje opakující se stejný refrén.")]),n("p",[t._v("Zpěvník má omezený množství znaků, které se mohou v písničce objevit. Kromě abecedy (malé i velké včetně češtiny) a čísel jsou to: "),n("b",[t._v(". , - + ? ! & # \" ( ) [ ] | : '")])]),n("p",[t._v("Do editoru můžeš zadávat značky ručně a nebo použít tlačítka v hlavičce.")])]),n("div",{staticClass:"psm"},[n("h4",[t._v("Příklad písně")]),n("p",[n("b",[t._v("[verse]")]),n("br"),n("b",[t._v("[Dmi]")]),t._v("Dávám sbohem "),n("b",[t._v("[C]")]),t._v("břehům prokla"),n("b",[t._v("[Ami]")]),t._v("tejm,"),n("br"),t._v("\n\t\t\tkterý "),n("b",[t._v("[Dmi]")]),t._v(" v drápech má "),n("b",[t._v("[C]")]),t._v("ďábel "),n("b",[t._v("[Dmi]")]),t._v("sám."),n("br"),n("br"),n("b",[t._v("[chorus]")]),n("br"),t._v("\n\t\t\tJen tři "),n("b",[t._v("[F]")]),t._v("kříže z bí"),n("b",[t._v("[C]")]),t._v("lýho kame"),n("b",[t._v("[Ami]")]),t._v("ní"),n("br"),n("b",[t._v("|:")]),t._v(" někdo "),n("b",[t._v("[Dmi]")]),t._v("do písku "),n("b",[t._v("[C]")]),t._v("posklá"),n("b",[t._v("[Dmi]")]),t._v("dal. "),n("b",[t._v(":|")]),n("br"),n("br"),n("b",[t._v("[verse]")]),n("br"),t._v("\n\t\t\tPrvní kříž má pod sebou jen hřích, samý pití a rvačka jen."),n("br")])])])}],Wt=function(t){function e(){return Object(h["a"])(this,e),Object(b["a"])(this,Object(y["a"])(e).apply(this,arguments))}return Object(f["a"])(e,t),e}(_["c"]);Wt=k["a"]([_["a"]],Wt);var te=Wt,ee=te,ne=Object(o["a"])(ee,Ht,Xt,!1,null,null,null),re=ne.exports,ae=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form-group editor-group"},[n("label",[t._v("Text varianty:")]),n("div",{staticClass:"editor-control"},[n("div",{staticClass:"btn-group"},t._l(t.tabs,function(e){return n("button",{key:e,staticClass:"btn btn-default",on:{click:function(n){n.preventDefault(),t.onTabClick(e)}}},[t._v(t._s(e))])})),n("div",{staticClass:"btn-group"},t._l(t.chords,function(e){return n("button",{key:e,staticClass:"btn btn-default btn-chord",on:{click:function(n){n.preventDefault(),t.onChordClick(e)}}},[t._v(t._s(e+(t.shiftChords?"#":"")+(t.mollChords?"mi":"")))])})),n("div",{staticClass:"btn-group"},[n("button",{staticClass:"btn btn-default btn-chord",on:{click:function(e){return e.preventDefault(),t.toggleShiftChords(e)}}},[t._v("#")]),n("button",{staticClass:"btn btn-default btn-chord",on:{click:function(e){return e.preventDefault(),t.toggleMollChords(e)}}},[t._v("mi")])])]),n("textarea",{ref:"editor",staticClass:"form-control variant-text",attrs:{rows:"15"},domProps:{value:t.value},on:{input:function(e){t.update()}}})])},ie=[],oe=function(t){function e(){var t;return Object(h["a"])(this,e),t=Object(b["a"])(this,Object(y["a"])(e).apply(this,arguments)),t.tabs=["chorus","verse","rec"],t.chords=["C","D","E","F","G","A","H"],t.shiftChords=!1,t.mollChords=!1,t}return Object(m["a"])(e,[{key:"addEditorTag",value:function(t){var e=this.$refs.editor,n=e.selectionStart,r=e.value;e.value=r.substring(0,n)+t+r.substring(n),e.selectionEnd=n+t.length,e.focus(),this.$emit("input",e.value)}},{key:"update",value:function(){var t=this.$refs.editor;this.$emit("input",t.value)}},{key:"onTabClick",value:function(t){var e="[".concat(t,"]");this.addEditorTag(e)}},{key:"onChordClick",value:function(t){var e="[".concat(t).concat(this.shiftChords?"#":"").concat(this.mollChords?"mi":"","]");this.addEditorTag(e)}},{key:"toggleShiftChords",value:function(){this.shiftChords=!this.shiftChords}},{key:"toggleMollChords",value:function(){this.mollChords=!this.mollChords}}]),Object(f["a"])(e,t),e}(_["c"]);k["a"]([Object(_["b"])(),k["b"]("design:type",String)],oe.prototype,"value",void 0),oe=k["a"]([_["a"]],oe);var se,ce,ue,pe,de=oe,le=de,ve=(n("Xv+J"),Object(o["a"])(le,ae,ie,!1,null,"7fa17755",null)),ge=ve.exports,he=Object(j["a"])("song"),fe=Object(j["a"])("interpreter"),me=Object(j["a"])("author"),be=function(t){function e(){var t;return Object(h["a"])(this,e),t=Object(b["a"])(this,Object(y["a"])(e).apply(this,arguments)),t.variantId="",t.isNew=!1,t.isVariantNew=!1,t.songTitle="",t.selectedInterpreters=[],t.selectedMusicAuthors=[],t.selectedLyricsAuthors=[],t.description="",t.text="",t.isPrivate=!1,t}return Object(m["a"])(e,[{key:"created",value:function(){var t=Object(g["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.$route.params.songId?this.$route.params.variantId||(this.isVariantNew=!0):this.isNew=!0,t.next=3,Promise.all([this.fetchInterpreters(),this.fetchAuthors(),!this.isNew&&this.fetchSong(this.$route.params.songId)]);case 3:this.variantId=this.$route.params.variantId,this.formInit();case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"formInit",value:function(){var t=this;this.isNew||(this.songTitle=this.song.title,this.selectedInterpreters=this.song.interpreters.map(function(e){return{value:e,label:t.interpreterById(e).name}})||[],this.selectedMusicAuthors=this.song.authors&&this.song.authors.music?this.song.authors.music.map(function(e){return{value:e,label:t.authorById(e).name}}):[],this.selectedLyricsAuthors=this.song.authors&&this.song.authors.lyrics?this.song.authors.lyrics.map(function(e){return{value:e,label:t.authorById(e).name}}):[],this.isVariantNew||(this.description=this.variantById(this.variantId).description,this.text=this.variantById(this.variantId).text,this.isPrivate=0===this.variantById(this.variantId).visibility))}},{key:"save",value:function(){var t=Object(g["a"])(regeneratorRuntime.mark(function t(){var e,n,r,a,i,o=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this.selectedInterpreters.map(function(t){return t.value||t.label}).filter(function(t){return!o.interpreters.find(function(e){return e.id===t})}),n=this.selectedMusicAuthors.concat(this.selectedLyricsAuthors).map(function(t){return t.value||t.label}).filter(function(t){return!o.authors.find(function(e){return e.id===t})}),t.next=4,Promise.all(e.map(this.createInterpreter).concat(n.map(this.createAuthor)));case 4:return t.next=6,Promise.all([this.fetchAuthors(),this.fetchInterpreters()]);case 6:if(r={title:this.songTitle,authors:{music:this.selectedMusicAuthors.map(function(t){return t.value?t.value:o.authorByName(t.label).id}),lyrics:this.selectedLyricsAuthors.map(function(t){return t.value?t.value:o.authorByName(t.label).id})},interpreters:this.selectedInterpreters.map(function(t){return t.value?t.value:o.interpreterByName(t.label).id})},a={description:this.description,text:this.text,visibility:this.isPrivate?0:1},!this.isNew){t.next=14;break}return t.next=11,this.createSong(Object(v["a"])({},r,{variant:a}));case 11:this.error||this.$router.push({name:"variantView",params:{songId:this.song.id,variantId:this.song.variants[0].id}}),t.next=28;break;case 14:if(!this.isVariantNew){t.next=23;break}return t.next=17,this.createVariant(a);case 17:return i=t.sent,t.next=20,this.updateSong(Object(v["a"])({},r,{id:this.song.id}));case 20:this.error||this.$router.push({name:"variantView",params:{songId:this.song.id,variantId:i.id}}),t.next=28;break;case 23:return t.next=25,this.updateVariant(Object(v["a"])({},a,{id:this.variantId}));case 25:return t.next=27,this.updateSong(Object(v["a"])({},r,{id:this.song.id}));case 27:this.error||this.$router.push({name:"variantView",params:{songId:this.song.id,variantId:this.variantId}});case 28:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"onRouteChange",value:function(t,e){t.params.songId!==e.params.songId&&this.fetchSong(this.$route.params.songId),this.variantId=t.params.variantId,this.variantId?this.isVariantNew=!1:this.isVariantNew=!0,this.formInit()}},{key:"onVariantChange",value:function(t,e){t&&e&&t!==e&&this.$router.push({name:"variantEdit",params:{songId:this.song.id,variantId:t}})}},{key:"isReady",get:function(){return this.songState===C.ready&&this.interpretersState===C.ready&&this.authorsState===C.ready}},{key:"isLoading",get:function(){return this.songState===C.loading||this.interpretersState===C.loading||this.authorsState===C.loading}},{key:"mappedInterpreters",get:function(){return this.interpreters.map(function(t){return{label:t.name,value:t.id}})}},{key:"mappedAuthors",get:function(){return this.authors.map(function(t){return{label:t.name,value:t.id}})}}]),Object(f["a"])(e,t),e}(_["c"]);k["a"]([he.Action("fetch"),k["b"]("design:type",Function)],be.prototype,"fetchSong",void 0),k["a"]([he.Action,k["b"]("design:type",Function)],be.prototype,"updateVariant",void 0),k["a"]([he.Action,k["b"]("design:type",Function)],be.prototype,"createVariant",void 0),k["a"]([he.Action,k["b"]("design:type",Function)],be.prototype,"updateSong",void 0),k["a"]([he.Action,k["b"]("design:type",Function)],be.prototype,"createSong",void 0),k["a"]([he.State("state"),k["b"]("design:type","function"===typeof(se="undefined"!==typeof C&&C)&&se||Object)],be.prototype,"songState",void 0),k["a"]([he.State,k["b"]("design:type","function"===typeof(ce="undefined"!==typeof ISong&&ISong)&&ce||Object)],be.prototype,"song",void 0),k["a"]([he.State,k["b"]("design:type",Object)],be.prototype,"error",void 0),k["a"]([he.Getter,k["b"]("design:type",Function)],be.prototype,"variantById",void 0),k["a"]([fe.State("state"),k["b"]("design:type","function"===typeof(ue="undefined"!==typeof C&&C)&&ue||Object)],be.prototype,"interpretersState",void 0),k["a"]([fe.State("items"),k["b"]("design:type",Array)],be.prototype,"interpreters",void 0),k["a"]([fe.Action("fetch"),k["b"]("design:type",Function)],be.prototype,"fetchInterpreters",void 0),k["a"]([fe.Action("create"),k["b"]("design:type",Function)],be.prototype,"createInterpreter",void 0),k["a"]([fe.Getter("itemById"),k["b"]("design:type",Function)],be.prototype,"interpreterById",void 0),k["a"]([fe.Getter("itemByName"),k["b"]("design:type",Function)],be.prototype,"interpreterByName",void 0),k["a"]([me.State("state"),k["b"]("design:type","function"===typeof(pe="undefined"!==typeof C&&C)&&pe||Object)],be.prototype,"authorsState",void 0),k["a"]([me.State("items"),k["b"]("design:type",Array)],be.prototype,"authors",void 0),k["a"]([me.Action("fetch"),k["b"]("design:type",Function)],be.prototype,"fetchAuthors",void 0),k["a"]([me.Action("create"),k["b"]("design:type",Function)],be.prototype,"createAuthor",void 0),k["a"]([me.Getter("itemById"),k["b"]("design:type",Function)],be.prototype,"authorById",void 0),k["a"]([me.Getter("itemByName"),k["b"]("design:type",Function)],be.prototype,"authorByName",void 0),k["a"]([Object(_["d"])("$route"),k["b"]("design:type",Function),k["b"]("design:paramtypes",[Object,Object]),k["b"]("design:returntype",void 0)],be.prototype,"onRouteChange",null),k["a"]([Object(_["d"])("variantId"),k["b"]("design:type",Function),k["b"]("design:paramtypes",[String,String]),k["b"]("design:returntype",void 0)],be.prototype,"onVariantChange",null),be=k["a"]([Object(_["a"])({components:{PageLayout:E,VariantEditDescription:re,Editor:ge}})],be);var ye=be,ke=ye,_e=(n("09i/"),Object(o["a"])(ke,Yt,Kt,!1,null,"673b5f02",null)),we=_e.exports;r["default"].use(p["a"]);var Se=new p["a"]({mode:"history",routes:[{path:"/",name:"songList",component:Bt},{path:"/songbook",name:"songbookList",component:vt},{path:"/songbook/new",name:"songbookCreate",component:D},{path:"/songbook/:songbookId/add-songs",name:"songbookAddSongs",component:Bt},{path:"/songbook/:songbookId",name:"songbookEdit",component:D},{path:"/song/:songId/variant/new",name:"songVariantCreate",component:we},{path:"/song/:songId/variant/:variantId",name:"variantView",component:Qt},{path:"/song/new",name:"variantCreate",component:we},{path:"/song/:songId/variant/:variantId/edit",name:"variantEdit",component:we}]}),je=n("L2JU"),xe=n("vDqi"),Oe=n.n(xe);Oe.a.defaults.baseURL="https://zpevnik.skauting.cz/api/v1/",Oe.a.defaults.withCredentials=!0;var Ce=Oe.a.create({headers:{"Content-Type":"application/json",Accept:"application/json"}}),Ie=Oe.a.create({headers:{"Content-Type":"application/pdf",Accept:"application/pdf"}}),Re=function(){function t(){Object(h["a"])(this,t)}return Object(m["a"])(t,[{key:"getAuthors",value:function(){var t=Object(g["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Ce.get("authors"));case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"getInterpreters",value:function(){var t=Object(g["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Ce.get("interpreters"));case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"getUser",value:function(){var t=Object(g["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Ce.get("user"));case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"getSongs",value:function(){var t=Object(g["a"])(regeneratorRuntime.mark(function t(e){var n,r,a,i,o,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.query,r=void 0===n?"":n,a=e.page,i=void 0===a?1:a,o=e.perPage,s=void 0===o?50:o,t.abrupt("return",Ce.get("songs",{params:{query:r,page:i,per_page:s}}));case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getSongbooks",value:function(){var t=Object(g["a"])(regeneratorRuntime.mark(function t(e){var n,r,a,i,o,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.query,r=void 0===n?"":n,a=e.page,i=void 0===a?1:a,o=e.perPage,s=void 0===o?50:o,t.abrupt("return",Ce.get("songbooks",{params:{query:r,page:i,per_page:s}}));case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getSong",value:function(){var t=Object(g["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Ce.get("songs/".concat(e)));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getUsersName",value:function(){var t=Object(g["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Ce.get("users/".concat(e)));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getSongbook",value:function(){var t=Object(g["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Ce.get("songbooks/".concat(e)));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"exportSongbook",value:function(){var t=Object(g["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Ie("songbooks/".concat(e)));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"createAuthor",value:function(){var t=Object(g["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Ce.post("authors",{name:e}));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"createInterpreter",value:function(){var t=Object(g["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Ce.post("interpreters",{name:e}));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"deleteAuthor",value:function(){var t=Object(g["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Ce.delete("authors/".concat(e)));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"createSong",value:function(){var t=Object(g["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Ce.post("songs",e));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"createSongbook",value:function(){var t=Object(g["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Ce.post("songbooks",{title:e}));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"updateSong",value:function(){var t=Object(g["a"])(regeneratorRuntime.mark(function t(e,n){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Ce.put("songs/".concat(e),n));case 1:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"createVariant",value:function(){var t=Object(g["a"])(regeneratorRuntime.mark(function t(e,n){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Ce.post("songs/".concat(e,"/variants"),n));case 1:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"updateVariant",value:function(){var t=Object(g["a"])(regeneratorRuntime.mark(function t(e,n,r){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Ce.put("songs/".concat(e,"/variants/").concat(n),r));case 1:case"end":return t.stop()}},t,this)}));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"updateSongbook",value:function(){var t=Object(g["a"])(regeneratorRuntime.mark(function t(e,n){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Ce.put("songbooks/".concat(e),n));case 1:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"deleteSongbook",value:function(){var t=Object(g["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Ce.delete("songbooks/".concat(e)));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}]),t}(),Pe=new Re,Ee={namespaced:!0,state:{currentUser:void 0,state:C.ready,items:[],error:void 0},mutations:{setCurrentUser:function(t,e){t.currentUser=e},addUserName:function(t,e){t.items.push(e)},setState:function(t,e){t.state=e},setError:function(t,e){t.error=e}},getters:{userNameById:function(t){return function(e){var n=t.items.find(function(t){return t.id===e});return n?n.name:""}}},actions:{getCurrentUser:function(){var t=Object(g["a"])(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,n("setState",C.loading),t.prev=2,t.next=5,Pe.getUser();case 5:r=t.sent,n("setCurrentUser",r.data),n("setState",C.ready),t.next=15;break;case 10:t.prev=10,t.t0=t["catch"](2),n("setState",C.failed),n("setError",t.t0),console.error(t.t0);case 15:case"end":return t.stop()}},t,this,[[2,10]])}));return function(e){return t.apply(this,arguments)}}(),getUserName:function(){var t=Object(g["a"])(regeneratorRuntime.mark(function t(e,n){var r,a,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.commit,a=e.state,!a.items.find(function(t){return t.id===n})){t.next=3;break}return t.abrupt("return");case 3:return r("setState",C.loading),t.prev=4,t.next=7,Pe.getUsersName(n);case 7:i=t.sent,r("addUserName",Object(v["a"])({},i,{id:n})),r("setState",C.ready),t.next=17;break;case 12:t.prev=12,t.t0=t["catch"](4),r("setState",C.failed),r("setError",t.t0),console.error(t.t0);case 17:case"end":return t.stop()}},t,this,[[4,12]])}));return function(e,n){return t.apply(this,arguments)}}()}},Ae=Ee,Ne=new Re,Ve={namespaced:!0,state:{state:C.ready,error:void 0},getters:{variantById:function(t){return function(e){return t.song.variants.find(function(t){return t.id===e})}}},mutations:{setSong:function(t,e){t.song=e},setVariant:function(t,e){t.song=Object(v["a"])({},t.song,{variants:t.song.variants.map(function(t){return e.id===t.id?e:t})})},addVariant:function(t,e){t.song.variants.push(e)},setState:function(t,e){t.state=e},setError:function(t,e){t.error=e}},actions:{fetch:function(){var t=Object(g["a"])(regeneratorRuntime.mark(function t(e,n){var r,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,r("setState",C.loading),t.prev=2,t.next=5,Ne.getSong(n);case 5:a=t.sent,r("setSong",a.data),r("setState",C.ready),t.next=15;break;case 10:t.prev=10,t.t0=t["catch"](2),r("setState",C.failed),r("setError",t.t0),console.error(t.t0);case 15:case"end":return t.stop()}},t,this,[[2,10]])}));return function(e,n){return t.apply(this,arguments)}}(),updateSong:function(){var t=Object(g["a"])(regeneratorRuntime.mark(function t(e,n){var r,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,r("setState",C.loading),t.prev=2,t.next=5,Ne.updateSong(n.id,n);case 5:a=t.sent,r("setSong",a.data),r("setState",C.ready),t.next=15;break;case 10:t.prev=10,t.t0=t["catch"](2),r("setState",C.failed),r("setError",t.t0),console.error(t.t0);case 15:case"end":return t.stop()}},t,this,[[2,10]])}));return function(e,n){return t.apply(this,arguments)}}(),createSong:function(){var t=Object(g["a"])(regeneratorRuntime.mark(function t(e,n){var r,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,r("setState",C.loading),r("setError",void 0),t.prev=3,t.next=6,Ne.createSong(n);case 6:a=t.sent,r("setSong",a.data),r("setState",C.ready),t.next=16;break;case 11:t.prev=11,t.t0=t["catch"](3),r("setState",C.failed),r("setError",t.t0),console.error(t.t0);case 16:case"end":return t.stop()}},t,this,[[3,11]])}));return function(e,n){return t.apply(this,arguments)}}(),createVariant:function(){var t=Object(g["a"])(regeneratorRuntime.mark(function t(e,n){var r,a,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,a=e.state,r("setState",C.loading),r("setError",void 0),t.prev=3,t.next=6,Ne.createVariant(a.song.id,n);case 6:return i=t.sent,r("addVariant",i.data),r("setState",C.ready),t.abrupt("return",i.data);case 12:t.prev=12,t.t0=t["catch"](3),r("setState",C.failed),r("setError",t.t0),console.error(t.t0);case 17:case"end":return t.stop()}},t,this,[[3,12]])}));return function(e,n){return t.apply(this,arguments)}}(),updateVariant:function(){var t=Object(g["a"])(regeneratorRuntime.mark(function t(e,n){var r,a,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,a=e.state,r("setState",C.loading),r("setError",void 0),t.prev=3,t.next=6,Ne.updateVariant(a.song.id,n.id,n);case 6:i=t.sent,r("setVariant",i.data),r("setState",C.ready),t.next=16;break;case 11:t.prev=11,t.t0=t["catch"](3),r("setState",C.failed),r("setError",t.t0),console.error(t.t0);case 16:case"end":return t.stop()}},t,this,[[3,11]])}));return function(e,n){return t.apply(this,arguments)}}()}},Te=Ve,Fe=(n("tUrg"),new Re),$e={namespaced:!0,state:{state:C.ready,songbook:void 0,exportState:void 0,exportLink:""},mutations:{setSongbook:function(t,e){t.songbook=e},setExportLink:function(t,e){t.exportLink=e},setState:function(t,e){t.state=e},setExportState:function(t,e){t.exportState=e},setError:function(t,e){t.error=e}},actions:{fetch:function(){var t=Object(g["a"])(regeneratorRuntime.mark(function t(e,n){var r,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,r("setState",C.loading),t.prev=2,t.next=5,Fe.getSongbook(n);case 5:a=t.sent,r("setSongbook",a.data),r("setState",C.ready),t.next=15;break;case 10:t.prev=10,t.t0=t["catch"](2),r("setState",C.failed),r("setError",t.t0),console.error(t.t0);case 15:case"end":return t.stop()}},t,this,[[2,10]])}));return function(e,n){return t.apply(this,arguments)}}(),exportSongbook:function(){var t=Object(g["a"])(regeneratorRuntime.mark(function t(e){var n,r,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,r=e.state,n("setExportState",C.loading),t.prev=2,t.next=5,Fe.exportSongbook(r.songbook.id);case 5:a=t.sent,n("setExportLink","https://zpevnik.skauting.cz/"+a.data.link),n("setExportState",C.ready),t.next=15;break;case 10:t.prev=10,t.t0=t["catch"](2),n("setExportState",C.failed),n("setError",t.t0),console.error(t.t0);case 15:case"end":return t.stop()}},t,this,[[2,10]])}));return function(e){return t.apply(this,arguments)}}(),update:function(){var t=Object(g["a"])(regeneratorRuntime.mark(function t(e,n){var r,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,r("setState",C.loading),t.prev=2,t.next=5,Fe.updateSongbook(n.id,n);case 5:a=t.sent,r("setSongbook",a.data),r("setState",C.ready),t.next=15;break;case 10:t.prev=10,t.t0=t["catch"](2),r("setState",C.failed),r("setError",t.t0),console.error(t.t0);case 15:case"end":return t.stop()}},t,this,[[2,10]])}));return function(e,n){return t.apply(this,arguments)}}(),create:function(){var t=Object(g["a"])(regeneratorRuntime.mark(function t(e,n){var r,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,r("setState",C.loading),t.prev=2,t.next=5,Fe.createSongbook(n);case 5:a=t.sent,r("setSongbook",a.data),r("setState",C.ready),t.next=15;break;case 10:t.prev=10,t.t0=t["catch"](2),r("setState",C.failed),r("setError",t.t0),console.error(t.t0);case 15:case"end":return t.stop()}},t,this,[[2,10]])}));return function(e,n){return t.apply(this,arguments)}}()}},Le=$e,Be=new Re,ze={namespaced:!0,state:{state:C.ready,items:[],searchQuery:"",page:0,perPage:50,total:0,error:void 0},getters:{lastPage:function(t){return Math.ceil(t.total/t.perPage)-1},songById:function(t){return function(e){return t.items.find(function(t){return t.id===e})}}},mutations:{setPage:function(t,e){t.page=e},setTotal:function(t,e){t.total=e},setSearchQuery:function(t,e){t.searchQuery=e},setItems:function(t,e){t.items=e},setState:function(t,e){t.state=e},setError:function(t,e){t.error=e},reset:function(t){t.searchQuery="",t.page=0}},actions:{fetch:function(){var t=Object(g["a"])(regeneratorRuntime.mark(function t(e){var n,r,a,i,o,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,r=e.state,n("setState",C.loading),t.prev=2,t.next=5,Be.getSongs({query:r.searchQuery,page:r.page,perPage:r.perPage});case 5:a=t.sent,i=a.data,o=i.count,s=i.data,n("setItems",s),n("setTotal",o),n("setState",C.ready),t.next=19;break;case 14:t.prev=14,t.t0=t["catch"](2),n("setState",C.failed),n("setError",t.t0),console.error(t.t0);case 19:case"end":return t.stop()}},t,this,[[2,14]])}));return function(e){return t.apply(this,arguments)}}(),goToPage:function(){var t=Object(g["a"])(regeneratorRuntime.mark(function t(e,n){var r,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,a=e.dispatch,r("setPage",n),t.next=4,a("fetch");case 4:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),search:function(){var t=Object(g["a"])(regeneratorRuntime.mark(function t(e,n){var r,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,a=e.dispatch,r("setSearchQuery",n),t.next=4,a("fetch");case 4:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()}},Ue=ze,Me=new Re,Ge={namespaced:!0,state:{state:C.ready,items:[],searchQuery:"",page:0,perPage:50,total:0,error:void 0},getters:{lastPage:function(t){return Math.ceil(t.total/t.perPage)-1}},mutations:{setPage:function(t,e){t.page=e},setTotal:function(t,e){t.total=e},setSearchQuery:function(t,e){t.searchQuery=e},setItems:function(t,e){t.items=e},setState:function(t,e){t.state=e},setError:function(t,e){t.error=e}},actions:{fetch:function(){var t=Object(g["a"])(regeneratorRuntime.mark(function t(e){var n,r,a,i,o,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,r=e.state,n("setState",C.loading),t.prev=2,t.next=5,Me.getSongbooks({query:r.searchQuery,page:r.page,perPage:r.perPage});case 5:a=t.sent,i=a.data,o=i.count,s=i.data,n("setItems",s),n("setTotal",o),n("setState",C.ready),t.next=19;break;case 14:t.prev=14,t.t0=t["catch"](2),n("setState",C.failed),n("setError",t.t0),console.error(t.t0);case 19:case"end":return t.stop()}},t,this,[[2,14]])}));return function(e){return t.apply(this,arguments)}}(),goToPage:function(){var t=Object(g["a"])(regeneratorRuntime.mark(function t(e,n){var r,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,a=e.dispatch,r("setPage",n),t.next=4,a("fetch");case 4:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),search:function(){var t=Object(g["a"])(regeneratorRuntime.mark(function t(e,n){var r,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,a=e.dispatch,r("setSearchQuery",n),t.next=4,a("fetch");case 4:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()}},De=Ge,Ze=new Re,Je={namespaced:!0,state:{state:C.ready,items:[],error:void 0},getters:{itemById:function(t){return function(e){return t.items.find(function(t){return t.id===e})}},itemByName:function(t){return function(e){return t.items.find(function(t){return t.name===e})}}},mutations:{setItems:function(t,e){t.items=e},setState:function(t,e){t.state=e},setError:function(t,e){t.error=e},addItem:function(t,e){t.items.push(e)}},actions:{fetch:function(){var t=Object(g["a"])(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,n("setState",C.loading),t.prev=2,t.next=5,Ze.getInterpreters();case 5:r=t.sent,n("setItems",r.data),n("setState",C.ready),t.next=15;break;case 10:t.prev=10,t.t0=t["catch"](2),n("setState",C.failed),n("setError",t.t0),console.error(t.t0);case 15:case"end":return t.stop()}},t,this,[[2,10]])}));return function(e){return t.apply(this,arguments)}}(),create:function(){var t=Object(g["a"])(regeneratorRuntime.mark(function t(e,n){var r,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,r("setState",C.loading),t.prev=2,t.next=5,Ze.createInterpreter(n);case 5:a=t.sent,r("addItem",a.data),r("setState",C.ready),t.next=15;break;case 10:t.prev=10,t.t0=t["catch"](2),r("setState",C.failed),r("setError",t.t0),console.error(t.t0);case 15:case"end":return t.stop()}},t,this,[[2,10]])}));return function(e,n){return t.apply(this,arguments)}}()}},qe=Je,Qe=new Re,Ye={namespaced:!0,state:{state:C.ready,items:[],error:void 0},getters:{itemById:function(t){return function(e){return t.items.find(function(t){return t.id===e})}},itemByName:function(t){return function(e){return t.items.find(function(t){return t.name===e})}}},mutations:{setItems:function(t,e){t.items=e},setState:function(t,e){t.state=e},setError:function(t,e){t.error=e},addItem:function(t,e){t.items.push(e)}},actions:{fetch:function(){var t=Object(g["a"])(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,n("setState",C.loading),t.prev=2,t.next=5,Qe.getAuthors();case 5:r=t.sent,n("setItems",r.data),n("setState",C.ready),t.next=15;break;case 10:t.prev=10,t.t0=t["catch"](2),n("setState",C.failed),n("setError",t.t0),console.error(t.t0);case 15:case"end":return t.stop()}},t,this,[[2,10]])}));return function(e){return t.apply(this,arguments)}}(),create:function(){var t=Object(g["a"])(regeneratorRuntime.mark(function t(e,n){var r,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,r("setState",C.loading),t.prev=2,t.next=5,Qe.createAuthor(n);case 5:a=t.sent,r("addItem",a.data),r("setState",C.ready),t.next=15;break;case 10:t.prev=10,t.t0=t["catch"](2),r("setState",C.failed),r("setError",t.t0),console.error(t.t0);case 15:case"end":return t.stop()}},t,this,[[2,10]])}));return function(e,n){return t.apply(this,arguments)}}()}},Ke=Ye;r["default"].use(je["a"]);var He,Xe=new je["a"].Store({modules:{user:Ae,song:Te,songbook:Le,songList:Ue,songbookList:De,interpreter:qe,author:Ke}}),We=n("CHRH"),tn=n("Snq/"),en=n.n(tn);n("0G0I");(function(t){t[t["loading"]=0]="loading",t[t["failed"]=1]="failed",t[t["ready"]=2]="ready"})(He||(He={})),r["default"].config.productionTip=!1,r["default"].component("icon",We["a"]),r["default"].component("v-select",en.a),r["default"].use(Ct),new r["default"]({router:Se,store:Xe,render:function(t){return t(u)}}).$mount("#app")}});
//# sourceMappingURL=app.65f4dc6f.js.map